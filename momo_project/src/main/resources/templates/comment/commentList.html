<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>*</title>
</head>
<body>
<div>
    <table>
        <tr>
        	<th>댓글 번호</th>
            <th>댓글</th>
        </tr>
        
        <tbody id="divReloadLayer">
        <tr th:each="comment : ${comments}">
           
            <td>
                <span th:text="${comment.replyContent}"></span>
                <span hidden id="replyNum" th:text="${comment.replyNum}"></span>
            </td>
             <td>
          <td><a href="/comment" th:href="@{'comment/delete/' + ${comment.replyNum}}">삭제</a></td>
           <button onclick="commentDelete02()" type="button" class="btn btn-sm btn-danger" >삭제</button>
               
            <button id="btn" type="submit">수정</button>
        
            </td>
        </tr>
        </tbody>
    </table>
</div>
	<script src="https://code.jquery.com/jquery-latest.min.js"></script>
<script th:inline="javascript">
function commentDelete02(){

		var replyNumArray = [];
let boardNum = document.getElementById("boardNum").value;
		replyNumArray.push($("#replyNum").val());

		console.log(replyNumArray);



		var confirmAlert = confirm('정말로 삭제하시겠습니까?');
		if(confirmAlert){

			$.ajax({
		        type : 'POST'
		       ,url : "/board/delete"
		       ,dataType : 'json'
		       ,data : JSON.stringify(replyNumArray)
		       ,contentType: 'application/json'
		       ,success : function(result) {
					alert("해당글이 정상적으로 삭제되었습니다.");
					location.href = "/test02/"+{boardNum};
		       },
		       error: function(request, status, error) {

		       }
		   })
		}
	}


$('#btn').click(function(replyNum){
	function replyDelete(){
    var replyNum = $(this).attr("data-del");
    var sendData = {"comment": replyNum}
    $.ajax({
        method: 'GET',
        url : 'replyDelete',
        data : sendData,
        success: init
    })
}
});

</script>
</body>
</html>